"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = traverse;
<<<<<<< HEAD
var _definitions = require("../definitions");
=======

var _definitions = require("../definitions");

>>>>>>> main
function traverse(node, handlers, state) {
  if (typeof handlers === "function") {
    handlers = {
      enter: handlers
    };
  }
<<<<<<< HEAD
=======

>>>>>>> main
  const {
    enter,
    exit
  } = handlers;
  traverseSimpleImpl(node, enter, exit, state, []);
}
<<<<<<< HEAD
=======

>>>>>>> main
function traverseSimpleImpl(node, enter, exit, state, ancestors) {
  const keys = _definitions.VISITOR_KEYS[node.type];
  if (!keys) return;
  if (enter) enter(node, ancestors, state);
<<<<<<< HEAD
  for (const key of keys) {
    const subNode = node[key];
=======

  for (const key of keys) {
    const subNode = node[key];

>>>>>>> main
    if (Array.isArray(subNode)) {
      for (let i = 0; i < subNode.length; i++) {
        const child = subNode[i];
        if (!child) continue;
        ancestors.push({
          node,
          key,
          index: i
        });
        traverseSimpleImpl(child, enter, exit, state, ancestors);
        ancestors.pop();
      }
    } else if (subNode) {
      ancestors.push({
        node,
        key
      });
      traverseSimpleImpl(subNode, enter, exit, state, ancestors);
      ancestors.pop();
    }
  }
<<<<<<< HEAD
=======

>>>>>>> main
  if (exit) exit(node, ancestors, state);
}

//# sourceMappingURL=traverse.js.map
